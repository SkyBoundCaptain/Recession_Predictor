function unsetMapChart(){$(".share-dropdown").removeClass("hide"),$(".account-dropdown").removeClass("hide"),$("#download-button").removeClass("hide"),$("#share-socialmedia").removeClass("hide"),$("#meta-download-button-sm").removeClass("hide"),$("#meta-twitter-button-sm").removeClass("hide"),$("#cal-button-container .calendar-icon-toggle").removeClass("hide"),$("#zoom-and-share").css("background-color","rgb(225, 233, 240)"),$("#fullscreen-btn").removeClass("fullscreen-map-btn")}function setDateChart(){$(".ranges").removeClass("hide"),$("#input-cosd").removeClass("hide"),$("#input-coed").removeClass("hide"),$(".date-seperator").removeClass("hide"),$("#zoom-pie").addClass("hide"),unsetMapChart()}function setNonDateChart(e,t,a,n){$(".ranges").addClass("hide"),$("#input-cosd").addClass("hide"),$("#input-coed").addClass("hide"),$(".date-seperator").addClass("hide"),$("#zoom-pie").removeClass("hide"),initPieDatePicker(e,t,n),$("#input-pie-date").val()!==a&&$("#input-pie-date").val(a),unsetMapChart()}function setMapChart(){$(".ranges").addClass("hide"),$("#input-cosd").addClass("hide"),$("#input-coed").addClass("hide"),$(".date-seperator").addClass("hide"),$("#zoom-pie").addClass("hide"),$(".share-dropdown").addClass("hide"),$(".account-dropdown").addClass("hide"),$("#download-button").addClass("hide"),$("#meta-download-button-sm").addClass("hide"),$("#meta-twitter-button-sm").addClass("hide"),$("#cal-button-container .calendar-icon-toggle").addClass("hide"),$("#share-socialmedia").addClass("hide"),$("#zoom-and-share").css("background-color","#ffffff"),$("#fullscreen-btn").addClass("fullscreen-map-btn")}function initPieDatePicker(e,t,a){a="Monthly"==a?"months":"Daily"==a?"days":"years";$("#input-pie-date").datepicker({format:"yyyy-mm-dd",autoclose:!0,forceParse:!0,startView:"decade",minViewMode:a,orientation:"bottom",zIndexOffset:1901,startDate:e,endDate:t}),e&&$("#input-pie-date").datepicker("setStartDate",e),t&&$("#input-pie-date").datepicker("setEndDate",t)}function formatPieDate(e){return new Date(e.val().replace(/(\d\d\d\d)-(\d\d)-(\d\d)/,"$2/$3/$1")).getTime()}function updatePageContent(e,t,a){updateContentSection("title","series-title-text-container",e),1<e.length||!0===t||!0===a?$("#meta-left-col").addClass("hide"):$("#meta-left-col").removeClass("hide"),updateBottomContent(e)}function updateGraphTitle(e){postToApi(e,"title/",function(e){$("#series-title-text-container").html(e.result)})}function updateMetaContent(e){if(void 0===e||!e)return!1;var t=JSON.parse(e);if(void 0===t||void 0===t.seriesObjects||1!==t.seriesObjects.length)return!1;postToApi(e,"metadata/",function(e){$("#meta-left-col").html(e.result);e=$.fn.tooltip.Constructor.DEFAULTS.whiteList;e.table=[],e.tbody=[],e.tr=[],e.td=["class","colspan","align"],$("#recent-obs-link").popover({animation:"fade",content:$("#recent-obs-table").html(),delay:100,html:!0,placement:"bottom",trigger:"click"}),$("#meta-left-col").removeClass("hide")},function(){$("#meta-left-col").addClass("hide")})}function updateBottomContent(e){updateContentSection("notes","notes-content",e),updateContentSection("releasetables","releasetables-content",e),updateContentSection("relatedcontent","relatedcontent-content",e)}function updateContentSection(t,a,e){var n=getApiHost(),e=$.ajax({url:n+"/graph/api/series/"+t+"/"+e.join(),method:"GET",data:{id:e},dataType:"json"});e.done(function(e){e.result&&($("#"+a).html(e.result),$("#"+t).removeClass("hide")),"notes"===t&&(e.result&&e.result.match(/[Cc]opyright/)?$(".copyright-indicator, .copyright-note").removeClass("hide"):$(".copyright-indicator, .copyright-note").addClass("hide")),$(".related-resource-img").each(function(){$(this).attr("src",$(this).data("src")).fadeIn()})}),e.fail(function(e,t){console.log("Request failed: "+t)})}function toggleTooltip(e){e="no"===e?"none":"block";$(".highcharts-tooltip").css("display",e)}function checkCopyrighted(e){var t=getApiHost(),e=$.ajax({url:t+"/graph/api/series/"+"copyright/"+e.join(),method:"GET",data:{},dataType:"json"});e.done(function(e){1==e.result?$(".copyright-indicator, .copyright-note").removeClass("hide"):$(".copyright-indicator, .copyright-note").addClass("hide")}),e.fail(function(e,t){console.log("Request failed: "+t)})}function setDateInputs(e,t,a){return e}function handleDateChange(e){$("#range").val("Custom");var t=$("input.cosd").val(),a=$("input.coed").val();window.fredgraph.validateExtremes(t,a,function(e,t,a){window.setDateInputs(e,t,a)}),window.fredgraph.setExtremesWithFormattedDate($("input.cosd").val(),$("input.coed").val())}function handleQuickDateSelected(e){e.preventDefault();var e=$(this).attr("id");return!(void 0===e||!["zoom-1yr","zoom-5yr","zoom-10yr","zoom-all"].includes(e))&&($(".embed-code-container, .page-permalink-container, .image-permalink-container, #graph-radios").hide(),e="zoom-all"===e?($("#range").val("Max"),0):"zoom-1yr"===e?($("#range").val("1yr"),1):"zoom-5yr"===e?($("#range").val("5yrs"),5):($("#range").val("10yrs"),10),window.fredgraph.setExtremesWithRange(e),!0)}function getMinViewModeFromFreq(e){var t="days";return/^Annual/.test(e)||/^5\sYear/.test(e)?t="years":(/^Monthly/.test(e)||/^Quarterly/.test(e)||/^Semiannual/.test(e))&&(t="months"),t}function initializeDatePicker(e,t,a){$(".cosd, .coed").each(function(){$(this).datepicker({format:"yyyy-mm-dd",autoclose:!0,forceParse:!0,startView:"decade",minViewMode:getMinViewModeFromFreq(e),orientation:"bottom",zIndexOffset:1901,startDate:t,endDate:a})}),$("input.cosd, input.coed").on("changeDate",handleDateChange)}function handleAfterSetExtremes(e,t){if(1===t.chart.drp)return $("#zoom-controls").addClass("hide"),!0;$("#zoom-controls").removeClass("hide"),$("#input-cosd").data("datepicker")||initializeDatePicker(t.chart.frequency,t.chart.min_date,t.chart.max_date);e=e.extremes;$("#input-cosd").data("datepicker")._process_options({minViewMode:getMinViewModeFromFreq(t.chart.frequency)}),$("#input-coed").data("datepicker")._process_options({minViewMode:getMinViewModeFromFreq(t.chart.frequency)}),$("#input-cosd").datepicker("setStartDate",e.dataStartDate),$("#input-cosd").datepicker("setEndDate",e.dataEndDate),$("#input-coed").datepicker("setStartDate",e.dataStartDate),$("#input-coed").datepicker("setEndDate",e.dataEndDate),$("#input-cosd").datepicker("update",e.startDate),$("#input-coed").datepicker("update",e.endDate)}function postToApi(e,t,a,n){var o=new FormData;o.append("settings",e);o=getApiHost(),e=$.ajax({beforeSend:function(e){e.setRequestHeader("Accept","application/json")},url:o+"/graph/api/series/"+t,method:"POST",data:e,contentType:"application/json;charset=utf-8",dataType:"json",processData:!1});e.done(function(e){a(e)}),e.fail(function(e,t){console.log("Request failed: "+t),void 0!==n&&n()})}function runPowerPoint(e){return e.preventDefault(),window.fredgraph.appMiddleware(function(e){postToApi(e,"hash/",function(e){e.hash&&exportPowerpoint({id:e.hash,title:" ",notes:scrapeNotes()})})}),!1}function exportPowerpoint(e){downloadFile({url:"/graph/ajax-requests.php",action:"download_as_ppt",g:e.id,id:e.id,title:e.title,notes:e.notes,before:function(){void 0!==e.beforeSend&&e.beforeSend()},success:function(){void 0!==e.failed&&e.failed()},complete:function(){void 0!==e.complete&&e.complete()}})}function scrapeNotes(){var a=[];return $(".notes-series-group").each(function(e,t){$(t).find("p").each(function(e,t){return!!$(t).hasClass("note-faq")||(str=$(t).text(),void a.push($.trim(str)))}),a.push(" || ")}),a.length?a.join(" || "):""}function adjustColorPicker(e){wentOffScreen($("#line-color-"+e))&&($("#line-color-"+e+"-wrapper").css("position","absolute"),$("#line-color-"+e+"-wrapper").css("bottom","350px"))}function wentOffScreen(e){e=$(e).offset().top+$(e).outerHeight();return $(window).scrollTop()+$(window).height()<e+300}function getApiHost(){var e=window.location.protocol;return/alfred/.test(window.location.host)?e+"//"+websiteCfg.alfred_host:/fred/.test(window.location.host)?e+"//"+websiteCfg.fred_host:window.location.protocol+"//localhost"}window.onload=function(){setTimeout(function(){$(".related-resource-img").each(function(){$(this).attr("src",$(this).data("src")).fadeIn()})},3e3)},$(document).ready(function(){Math.floor(Math.random()*["#4572a7","#83b2df","#413e1a","#8c8532","#88a44c","#b22a25","#d86342","#b27a3f","#5a1a45","#551e5a"].length);function n(){r(),$(".highcharts-contextbutton").click(),$(".highcharts-menu-item")[1].click()}fgDateRangeCallbacks={},r(),window.graphResizedByUser=!1,$("#resizable-graph-container").width()!=$("#main-content-column").width()&&(window.graphResizedByUser=!0),$("#zoom-controls").on("click","span, a",handleQuickDateSelected),$(".calendar-icon-toggle").on("click",function(e){e.preventDefault(),$("#date-custom-range").toggle("slide",{direction:"right"})}),$(".overlay-btn").on("click",function(e){e.preventDefault(),$(".overlay-panel").addClass("is-visible"),r(),d(),$("#edit-lines-badge").fadeIn(2e3),$(".add-series-tab").hasClass("active")&&$("#add-series-container").find(".add-data-series-input").focus(),window.fredgraph.setPanelOpen(!0),e.stopPropagation()}),$("body").on("click","#export-png",function(e){e.preventDefault(),n()}),$("body").on("click",function(e){!$(".overlay-panel").hasClass("is-visible")||$(e.target).closest("#resizable-graph-container").length||$(e.target).closest("#zoom-controls").length||$(e.target).is(".fancybox-close")||$(e.target).closest("#remove-series-modal").length||$(e.target).closest(".overlay-panel").length&&!$(e.target).is(".overlay-panel-close")||i()}),$(".overlay-panel-close").on("click",function(e){i()}),$(window).resize(function(){s($("#main-content-column").width(),$("#height").val())}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){"#addseries"==$(this).data("target")&&$("#add-series-container").find(".add-data-series-input").focus()}),$(".edit-series-dropdown > a").click(function(e){$(".series-group-tab").length<=1&&$(".fg-edit-series-tab").eq(0).trigger("click")}),$(".tooltips").tooltip(),$('#tabbed-menu li > a[href^="#"]').on("click",function(e){e.preventDefault(),$(document).off("scroll"),$("#tabbed-menu li").each(function(){$(this).removeClass("active")}),$(this).parent().addClass("active");var t=this.hash;$target=$(t),$("html, body").stop().animate({scrollTop:$target.offset().top+2},500,"swing",function(){window.location.hash=t})});var e=$(".back-top");$(window).scroll(function(){300<$(this).scrollTop()?e.addClass("back-is-visible"):e.removeClass("back-is-visible back-fade-out"),1200<$(this).scrollTop()&&e.addClass("back-fade-out")}),e.on("click",function(e){e.preventDefault(),$("body,html").animate({scrollTop:0},700)});var t=$.fn.tooltip.Constructor.DEFAULTS.whiteList;t.table=[],t.tbody=[],t.tr=[],t.td=["class","colspan","align"],$("#recent-obs-link").popover({animation:"fade",content:$("#recent-obs-table").html(),delay:500,html:!0,placement:"bottom",trigger:"click"}),$("body").on("click",function(e){$("#recent-obs-link").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),$("#fullscreen-btn").on("click",function(e){!function(){$("#fullscreen-container").hasClass("chart-modal")?($("#fullscreen-btn-icon").attr("src","/graph/images/fullscreen.png"),$("#fullscreen-btn-icon").css("padding-right","10px"),$("#fullscreen-container").toggleClass("chart-modal"),s($("#zoom-and-share").width(),450)):function(){var e=20;!1===$(".edit-map-btn-large").parent().hasClass("hide")&&(e=30);$("#fullscreen-container").toggleClass("chart-modal"),$("#fullscreen-btn-icon").attr("src","/graph/images/fullscreenExit.png");var t=$("#fullscreen-container").width(),a=$("#fullscreen-container").height();s(t,a-e),$("#header").css("z-index","1"),$("#fullscreen-btn-icon").css("padding-right","20px")}();r()}()});var a=$("#main-content-column, .alfred-graph-container"),o=a.width(),t=450;function i(){var e=$("#main-content-column").width();$("#width").val();$(".overlay-panel").removeClass("is-visible"),$("#edit-lines-badge").css("display","none"),s(e,$("#height").val()),window.fredgraph.setPanelOpen(!1)}function r(){$(".highcharts-contextbutton").hide(),$(".highcharts-contextmenu").hide()}function d(){if(window.graphResizedByUser)return 1;var e=$("#main-content-column"),t=e.width(),e=$(window).width()-(e.offset().left+t),e=$(".overlay-panel-content").width()-e;if(t<(e=0<e?t-e-10:t)&&(e=t),$("#resizable-graph-container")==t)return 1;e<600&&(e=600),s(e=Math.floor(e),$("#height").val(),$("#show-axis-titles-value").prop("checked"))}function s(e,t){$("#resizable-graph-container").css({width:e+"px"}),window.fredgraph.setGraphSize(e,t)}function c(e){var t=getApiHost()+"/graph/",a=window.location.href.match("alfred")?"alfredgraph.png":"fredgraph.png";$("#link-code").val(t+"?g="+e),$("#image-code").val(t+a+"?g="+e);var n=parseInt($("#width").val()),o=parseInt($("#height").val());window.graphResizedByUser||(n=670,o=475);a='<iframe src="'+t+"graph-landing.php?g="+e;a+="&width="+n+"&height="+o+'" scrolling="no" frameborder="0" ',a+='style="overflow:hidden; width:'+n+"px; height:"+(o+50)+'px;" ',a+='allowTransparency="true" loading="lazy"></iframe>',$("#embed-code").val(a);e='<div class="embed-container"><iframe src="'+t+"graph-landing.php?g="+e;e+="&width="+n+"&height="+o+'" scrolling="no" frameborder="0" ',e+='style="overflow:hidden;" allowTransparency="true" loading="lazy">',e+='</iframe></div><script src="https://fred.stlouisfed.org/graph/js/embed.js" type="text/javascript"><\/script>',$("#embed-code-responsive").val(e)}o<=640&&(t=.75*o),$("#resizable-graph-container").css({width:o+"px"}),$("#graph-container").css({width:o+"px",height:t+"px"}),$("#width").val(o).data("original-width",o),$("#height").val(t).data("original-height",t),$(".series-tag-cloud").find('[data-toggle="tooltip"]').tooltip({placement:"top",container:"body"}),"undefined"!=typeof debouncer&&$(window).on("resize.respond",debouncer(function(){o=a.width(),"undefined"!=typeof fredgraphUi&&($(".overlay-panel").hasClass("is-visible")?d():s(o,o<=640?.75*o:450,$("#show-axis-titles-value").prop("checked")))})),$("#graph-link-update-radio").on("click",function(){$("#graph-link-update-radio").prop("checked",!0),$("#graph-link-static-radio").prop("checked",!1),$("#graph-link-range-radio").prop("checked",!1),window.fredgraph.appMiddleware(function(e){postToApi(e,"hash/?type=updating",function(e){c(e.hash)})})}),$("#graph-link-static-radio").on("click",function(){$("#graph-link-update-radio").prop("checked",!1),$("#graph-link-static-radio").prop("checked",!0),$("#graph-link-range-radio").prop("checked",!1),window.fredgraph.appMiddleware(function(e){postToApi(e,"hash/?type=static",function(e){c(e.hash),$("#embed-code").val(getApiHost()+"/graph/"+image+"?g="+e.hash)})})}),$("#graph-link-range-radio").on("click",function(){$("#graph-link-update-radio").prop("checked",!1),$("#graph-link-static-radio").prop("checked",!1),$("#graph-link-range-radio").prop("checked",!0),window.fredgraph.appMiddleware(function(e){postToApi(e,"hash/?type=range&data_range="+$("#graph-link-range-radio").attr("data-range"),function(e){c(e.hash)})})}),$(".permalink-btn").on("click",function(e){e.preventDefault(),e.stopPropagation(),$("#permalink-modal").modal("show"),$(".embed-code-container, .page-permalink-container, .image-permalink-container, #graph-radios").hide(),$("#embed-container-responsive").addClass("hidden"),$("#permalink-modal-header").html($(this).text());e=$(this).data("target");$(e).show(),$("#graph-link-update-radio").prop("checked",!0),$("#graph-link-static-radio").prop("checked",!1),$("#graph-link-range-radio").prop("checked",!1),window.fredgraph.appMiddleware(function(e){postToApi(e,"range/",function(e){e.range&&(e=e.range,$("#graph-link-update").text(e.fixed_cosd),$("#graph-link-static").text(e.fixed_cosd_fixed_coed),$("#graph-link-range").text(e.floating_date_range),$("#graph-link-range-radio").attr("data-range",e.range),$("#graph-radios").show(),"pie"===e.chart_type?($("#graph-link-static").hide(),$("#graph-link-static-radio").hide(),$("#graph-link-update-radio").trigger("click")):0<e.fixed_cosd.length?$("#graph-link-update-radio").trigger("click"):($("#graph-radios").hide(),$("#graph-link-static-radio").trigger("click")))})})}),$(".social-share-link").on("click",function(e){e.preventDefault();var t=$(this).data("shareType");window.fredgraph.appMiddleware(function(e){postToApi(e,"settings/url/",function(e){e.url&&(window.location=getApiHost()+"/graph/share.php?share="+t+"&"+e.url)})})}),$(".download-menu-item").on("click",function(e){var t=$(this).data("action"),a="";switch(t){case"excel":a="fredgraph.xls";break;case"csv":a="fredgraph.csv";break;case"pdf":a="fredgraph.pdf";break;case"png":a=!1,n();break;case"ppt":return a=!1,void runPowerPoint(e);default:a=!1}a&&(e.preventDefault(),window.fredgraph.appMiddleware(function(e){postToApi(e,"settings/url/",function(e){e.url&&(e="/graph/"+a+"?"+e.url,window.location=getApiHost()+e)})}))}),$("#collapse-embed-responsive").on("click",function(e){e.preventDefault(),$(".embed-container-responsive").removeClass("hidden")}),new ClipboardJS(".copy-to-clipboard").on("success",function(e){$(e.trigger).prev("input").blur().effect("highlight")}),$(".embed-popover").popover({container:"body",html:!0,trigger:"hover"}),$(".embed-code-btn, .page-permalink-btn, .image-permalink-btn").on("click",function(e){e.preventDefault()}),$('a[data-toggle="tab"]').on("show.bs.tab",function(e){"#save-share"==$(e.target).attr("href")&&$(".embed-code-container, .page-permalink-container, .image-permalink-container, #graph-radios").hide()});var l=$("#input-pie-date").val();$("#input-pie-date").on("changeDate",function(){var e=$("#input-pie-date").val();l!==e&&e.match(/^\d{4}-\d{2}-\d{2}$/)&&(l=e,window.fredgraph.updatePieChart(e))})});
//# sourceMappingURL=bottomextra.min.js.map