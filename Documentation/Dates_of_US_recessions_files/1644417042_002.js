function initRecentlyViewed(){var t,e=/^\/series\/([^\/]+)\/*/,n=$(".series-recently-viewed").val(),r=[],a=null!=localStorage.getItem("series")?localStorage.getItem("series"):localStorage.getItem("series","{}"),o=e.exec(window.location.pathname);e.test(window.location.pathname)&&(t=o[1],void 0!==localStorage.getItem("series")&&null!=localStorage.getItem("series")&&(cleanData=JSON.parse(a),r=cleanData.filter(function(e){return e.series_id.toLowerCase()!=t.toLowerCase()})),r.push({series_id:t,timestamp:Date.now(),url:window.location.pathname,title:n}),localStorage.setItem("series",JSON.stringify(r)))}function createCookie(e,t,n){var r=n?((r=new Date).setTime(r.getTime()+24*n*60*60*1e3),"; expires="+r.toGMTString()):"";document.cookie=e+"="+t+r+";path=/; secure"}function readCookie(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}function hamburgerMenuNavigation(e){hamburgerCloseAllMenu(),$("#"+e).removeClass("hide")}function hamburgerCloseAllMenu(){["hamburger-home","hamburger-about-fred","hamburger-tools","hamburger-research","hamburger-products"].forEach(function(e){$("#"+e).addClass("hide")})}window.initializeSearchAutoComplete=function(){$(document).on("keyup",null,"/",function(){$("#head-search").focus()}),initRecentlyViewed(),$("#head-search").select2({multiple:!0,dropdownCssClass:"header-search-dropdown",language:{noResults:function(){return $("#select2-head-search-results").addClass("hidden"),""},errorLoading:function(){return $("#select2-head-search-results").addClass("hidden"),""}},ajax:{url:function(e){return"/graph/api/series/sitesearch/"+(e.term||"null")},data:function(e){return""},dataType:"json",processResults:function(e){if($(".select2-results__option").removeClass("select2-results__option--highlighted"),$("#select2-head-search-results").removeClass("hidden"),!e.items)for(var e={items:[]},t=0;t<window.favesAndRecentSeries.length;t++){var n={series_id:window.favesAndRecentSeries[t].series_id,label:window.favesAndRecentSeries[t].title};-1==$.inArray(n,e.items)&&e.items.push(n)}return{results:$.map(e.items,function(e){return{text:e.label,id:e.series_id}})}}},placeholder:"Search FRED ...",minimumInputLength:0,escapeMarkup:function(e){return e},templateResult:function(e){if($(".select2-results__option").removeClass("select2-results__option--highlighted"),e.loading)return"Finding FRED Series";e="<div class='select2-result-series clearfix' style='z-index:9001'><div class='select2-result-series__item'><div class='select2-result-series__title'>"+e.text+"</div>";return e+="</div></div>"},templateSelection:function(e){return e.id}});var r=$("#head-search");r.on("change.select2",function(e){var t=$(".select2-search__field").val();t&&$(".search-text-input").val(t)}),r.on("select2:select",function(e){var t=e.params.data;r.val(null).trigger("change"),e.params.originalEvent?window.location.href="/series/"+t.id:window.location.href="/searchresults/?st="+encodeURIComponent($(".search-text-input").val());function n(e){13===e.keyCode&&e.stopPropagation()}$("#head-search-form").on("keyup",".select2-selection",n),$("#search-container-header").on("keyup",".select2-selection",n)}),r.on("select2:open",function(e){void 0!==window.dataLayer&&window.dataLayer.push({event:"site-search-box-opened-gtm"})}),r.on("select2:open",function(e){$("#select2-nav-search-button").addClass("search-submit-select2-open"),$(".select2-search__field").val($(".search-text-input").val()).trigger("change").trigger("input"),$(".select2-search__field").attr("placeholder","Search FRED ...")}),r.on("select2:closing",function(e){$("#select2-nav-search-button").removeClass("search-submit-select2-open");var t=$(".select2-search__field").val();$(".search-text-input").val(t),""===t?$(".select2-search__field").attr("placeholder","Search FRED ..."):$(".select2-search__field").attr("placeholder",t)})},$(document).on("click","#select2-nav-search-button",function(){var e=encodeURIComponent($(".search-text-input").val());""!==e&&(window.location.href="/searchresults/?st="+e)}),$(document).on("keyup",".select2-search__field",function(e){13===e.which&&(window.location.href="/searchresults/?st="+encodeURIComponent($(".select2-search__field").val()),e.preventDefault())}),window.initializeLoggedInUserInterface=function(){if(!Boolean(document.cookie.match(/^(.*;)?\s*research-lirua.*\s*=\s*[^;]+(.*)?$/)))return!1;$.get("/graph/ajax-requests.php",{action:"load_favorites"},function(e){if(e){for(var t in e)$(".my-fred-favorites").append('<p><a href="/series/'+e[t].series_id+'" style="color:#333;text-transform:none"><i class="fas fa-fw fa-star"></i> '+e[t].title+"</a></p>");var n=e}else{$(".my-fred-favorites").append('<span style="color:#999">You have not saved any favorites yet.</span>');n=[]}var r,a=[],o=n.length?"Favorites & Recently Viewed":"Recently Viewed";$.each(n,function(e,t){n[e].value=t.title,n[e].category=o,n[e].icon="fa-star",a.push(t.series_id)}),null==localStorage.getItem("series")||1<(r=JSON.parse(localStorage.getItem("series"))||[]).length&&$.each(r.reverse().slice(0,5),function(e,t){-1==a.indexOf(t.series_id)&&n.push({title:t.title,series_id:t.series_id,value:t.title,category:o,icon:"fa-none"})}),window.favesAndRecentSeries=n})},$(function(){var e,n,r;navigator.userAgent.match(/IEMobile\/10\.0/)&&((e=document.createElement("style")).appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(e)),window.favesAndRecentSeries=[],document.cookie.indexOf("research-lirua")&&window.localStorage.getItem("authtoken")&&10<window.localStorage.getItem("authtoken").length||(null!=localStorage.getItem("series")&&(e=JSON.parse(localStorage.getItem("series")),n=[],r=[],1<e.length&&$.each(e.reverse().slice(0,5),function(e,t){-1==r.indexOf(t.series_id)&&n.push({title:t.title,series_id:t.series_id,value:t.title,category:"Recently Viewed",icon:"fa-none"})})),window.favesAndRecentSeries=n),$(".js-placeholder").each(function(){""===$(this).val()&&$(this).val($(this).prop("title"))}),$(".js-placeholder").focus(function(){var e=$(this);e.val()===e.attr("title")&&(e.val(""),e.removeClass("placeholder"))}).blur(function(){var e=$(this);""!==e.val()&&e.val()!==e.attr("title")||(e.addClass("placeholder"),e.val(e.attr("title")))}).blur().parents("form").submit(function(){$(this).find(".js-placeholder").each(function(){var e=$(this);e.val()===e.attr("title")&&e.val("")})}),$("#hamburger").popover({placement:"bottom",html:!0,sanitize:!1,content:function(){return $("#hamburger-popover").html()}}).on("hidden.bs.popover",function(e){e.preventDefault(),hamburgerCloseAllMenu(),$("#hamburger-home").removeClass("hide")}),$(".hamburger-popover-container").on("click",".nav-search-button",function(e){e.preventDefault();e=$(".nav-search").val();window.location.replace("/searchresults?st="+e)}),$(".hamburger-popover-container").on("keypress",".nav-search",function(e){if(13===e.which){e=$(".nav-search").val();return window.location.replace("/searchresults?st="+e),!1}}),$("#home-search-button").on("click",function(e){e.preventDefault();e=$("#home-search-input").val();window.location.replace("/searchresults?st="+e)}),$("#home-search-input").keypress(function(e){if(13===e.which){e=$("#home-search-input").val();return window.location.replace("/searchresults?st="+e),!1}}),$("#subscribe-email-btn").on("click",function(e){e.preventDefault(),$.post(appConfig.research_host+"/ajax/newsletter-subscribe.php",{newsletters:["fred"],email:$("#subscribe-email-input").val()}).done(function(e){e.subscriptions&&$("#subscribe-div").replaceWith("<p>Thank you. You've been added to our list and will hear from us soon.</p>")})});!function(){for(var e,t=document.getElementsByTagName("TEXTAREA"),n=0,r=t.length;n<r;n++)/^[0-9]+$/.test(t[n].getAttribute("maxlength"))&&(t[n].onkeyup=e=function(){var e=parseInt(this.getAttribute("maxlength"),10);if(this.value.length>e)return window.alert("Maximum length exceeded: "+e),this.value=this.value.substr(0,e),!1},t[n].onblur=e)}(),window.debouncer=function(n,r){var a,r=r||200;return function(){var e=this,t=arguments;clearTimeout(a),a=setTimeout(function(){n.apply(e,Array.prototype.slice.call(t))},r)}},Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r,a=[],o=2<=arguments.length?arguments[1]:void 0,i=0;i<n;i++)i in t&&(r=t[i],e.call(o,r,i,t)&&a.push(r));return a}),$("nav .dropdown").hover(function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(200).fadeIn(500)},function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(200).fadeOut(500)}),window.initializeSearchAutoComplete(),$(".select-all-checkboxes").click(function(){$("input:checkbox").prop("checked",$(this).prop("checked"))}),$(".pager-item-checkbox").click(function(){return!!$(this).prop("checked")||void $(".select-all-checkboxes").prop("checked",!1)}),$(".help-question span.link").click(function(){$(this).parent(".help-question").next(".help-answer").toggle()}),$(".feedback-form-btn").on("click",function(e){e.preventDefault(),$("#feedback-form").submit()}),$("#feedback-form").on("submit",function(e){var t=a();e.preventDefault(),$("#feedback-form-status").html(""),$("#feedback-form label").removeClass("state-error");t={comments:$("#feedback-form-comments").val(),client_info:"\nBrowser: "+t.name+"\nVersion: "+t.version+"\nUserAgent: "+t.userAgent+"\nOS: "+t.os+"\nViewport: "+t.viewportSize,name:$("#feedback-form-name").val(),email:$("#feedback-form-email").val(),profession:$("#feedback-form-profession").val(),organization:$("#feedback-form-organization").val(),product:$("#feedback-form-product").val(),topic:$("#feedback-form-topic").val(),hash:$("#hash-share").val(),url:window.location.href};$.post("/ajax/contact.php?",t).done(function(e){var n,t,e=JSON.parse(e);"success"==e.status?(t="alert-success",n="Your e-mail has been sent to the FRED team. Thank you for your interest in the data services of the Federal Reserve Bank of St. Louis.",$("#feedback-form select").val(""),$("#feedback-form input").val(""),$("#feedback-form textarea").val("")):"failure"==e.status?(n="Please correct the following errors before proceeding:<br />",$.each(e.errors,function(e,t){$("label[for='feedback-form-"+e+"']").addClass("state-error"),n+=t+"<br />"}),t="alert-danger"):(t="alert-danger",n="Sorry a problem has occurred.  Please try again."),$("#feedback-form-status").html('<div class="alert '+t+' alert-dismissable">'+n+"</div>")})}),$(".modal-tags-fullscreen").on("show.bs.modal",function(){setTimeout(function(){$(".modal-tags").addClass("modal-tags-fullscreen")},0)}),$(".modal-tags-fullscreen").on("hidden.bs.modal",function(){$(".modal-tags").addClass("modal-tags-fullscreen")});var a=function(){navigator.appVersion;var e,t=navigator.userAgent,n=navigator.appName,r=""+parseFloat(navigator.appVersion);-1!=(a=t.indexOf("Opera"))?(n="Opera",r=t.substring(a+6),-1!=(a=t.indexOf("Version"))&&(r=t.substring(a+8))):-1!=(a=t.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=t.substring(a+5)):-1!=t.indexOf(".NET")||-1!=t.indexOf("Media Center")?(n="Microsoft Internet Explorer",e=t.indexOf("rv:"),r=t.substring(e+3)):-1!=(a=t.indexOf("Chrome"))?(n="Chrome",r=t.substring(a+7)):-1!=(a=t.indexOf("Safari"))?(n="Safari",r=t.substring(a+7),-1!=(a=t.indexOf("Version"))&&(r=t.substring(a+8))):-1!=(a=t.indexOf("Firefox"))?(n="Firefox",r=t.substring(a+8)):(o=t.lastIndexOf(" ")+1)<(a=t.lastIndexOf("/"))&&(n=t.substring(o,a),r=t.substring(a+1),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),-1!=(o=(r=-1!=(o=(r=-1!=(o=r.indexOf(";"))?r.substring(0,o):r).indexOf(" "))?r.substring(0,o):r).indexOf(")"))&&(r=r.substring(0,o));t="Unknown OS";-1!=navigator.appVersion.indexOf("Win")&&(t="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(t="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(t="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(t="Linux");var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return{name:n,version:r,userAgent:navigator.userAgent,os:t,viewportSize:a+" x "+o}}}),$("#switchProd").popover({placement:"bottom",html:!0,content:function(){return $("#switchprod-popover").html()}}),$("#research-resources-link").popover({placement:"bottom",html:!0,content:function(){return $("#research-resources-popover").html()}}),$("#fred-tools-link").popover({placement:"bottom",html:!0,content:function(){return $("#fred-tools-popover").html()}}),$("#about-fred-link").popover({placement:"bottom",html:!0,content:function(){return $("#about-fred-popover").html()}}),$(document).on("click",function(e){$('[data-toggle="popover"],[data-original-title]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||((($(this).popover("hide").data("bs.popover")||{}).inState||{}).click=!1)})}),$(function(){$(".drawer-dropdown-trigger").on("click",function(e){e.preventDefault(),t()}),$(".drawer-dropdown .drawer-close").on("click",function(e){e.preventDefault(),t()}),$(".drawer-dropdown-wrapper").on("click","a",function(e){var t,o=$(this);$(o).hasClass("list-group-item")||(e.preventDefault(),o.next("ul").removeClass("is-hidden").end().parent(".has-children").parent("ul").addClass("move-out")),$(o).hasClass("group-tag-name-all")&&(t=$(this).data("group"),e=document.location.toString().replace(/\?.*/,""),e+="?"+$("#tags-related-search-form").serialize()+"&request_order="+request_order+"&rts=1",e+="&tg="+t,$.getJSON(e,function(a){Object.keys(a.related_tags).forEach(function(e){var t=a.related_tags[e],n=[];for(i=0;i<t.length;i++){var r=t[i].notes||t[i].capitalized_tag,r='<a href="'+t[i].url+'" class="list-group-item clear" id="'+r+'"><span class="pull-left tag-name">'+r+'</span><b class="pull-right"><span class="tag-count"> ('+t[i].series_count+")</span></b></a>";n.push(r),t[i].group_name}e='<li class="go-back"><a href="#0">Back</a></li><li class="duane">'+n.join("</li><li>")+"</li>";$(o).closest(".see-all").find(".drawer-secondary-dropdown").html(e)})}))});var e=$(".drawer-dropdown-wrapper").hasClass("open-to-left")?"left":"right";function t(){var e=!$(".drawer-dropdown").hasClass("dropdown-is-active");$(".drawer-dropdown").toggleClass("dropdown-is-active",e),$(".drawer-dropdown-trigger").toggleClass("dropdown-is-active",e),e||$(".drawer-dropdown").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(".has-children ul").addClass("is-hidden"),$(".move-out").removeClass("move-out"),$(".is-active").removeClass("is-active")})}$(".drawer-dropdown-content").menuAim({activate:function(e){$(e).children().addClass("is-active").removeClass("fade-out"),0==$(".drawer-dropdown-content .fade-in").length&&$(e).children("ul").addClass("fade-in")},deactivate:function(e){$(e).children().removeClass("is-active"),0!=$("li.has-children:hover").length&&!$("li.has-children:hover").is($(e))||($(".drawer-dropdown-content").find(".fade-in").removeClass("fade-in"),$(e).children("ul").addClass("fade-out"))},exitMenu:function(){return $(".drawer-dropdown-content").find(".is-active").removeClass("is-active"),!0},submenuDirection:e}),$(".drawer-dropdown-wrapper").on("click",".go-back",function(e){var t=$(this);$(this).parent("ul").parent(".has-children").parent("ul");t.parent("ul").addClass("is-hidden").parent(".has-children").parent("ul").removeClass("move-out")})});
//# sourceMappingURL=common.min.js.map